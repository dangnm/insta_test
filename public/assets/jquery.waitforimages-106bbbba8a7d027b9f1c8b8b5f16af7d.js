(function(e){typeof define=="function"&&define.amd?define(["jquery"],e):typeof exports=="object"?module.exports=e(require("jquery")):e(jQuery)})(function(e){var t="waitForImages";e.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]},e.expr[":"]["has-src"]=function(t){return e(t).is('img[src][src!=""]')},e.expr[":"].uncached=function(t){return e(t).is(":has-src")?!t.complete:!1},e.fn.waitForImages=function(){var n=0,r=0,i=e.Deferred(),s,o,u;e.isPlainObject(arguments[0])?(u=arguments[0].waitForAll,o=arguments[0].each,s=arguments[0].finished):arguments.length===1&&e.type(arguments[0])==="boolean"?u=arguments[0]:(s=arguments[0],o=arguments[1],u=arguments[2]),s=s||e.noop,o=o||e.noop,u=!!u;if(!e.isFunction(s)||!e.isFunction(o))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var a=e(this),f=[],l=e.waitForImages.hasImageProperties||[],c=e.waitForImages.hasImageAttributes||[],h=/url\(\s*(['"]?)(.*?)\1\s*\)/g;u?a.find("*").addBack().each(function(){var t=e(this);t.is("img:has-src")&&f.push({src:t.attr("src"),element:t[0]}),e.each(l,function(e,n){var r=t.css(n),i;if(!r)return!0;while(i=h.exec(r))f.push({src:i[2],element:t[0]})}),e.each(c,function(n,r){var i=t.attr(r),s;if(!i)return!0;s=i.split(","),e.each(s,function(n,r){r=e.trim(r).split(" ")[0],f.push({src:r,element:t[0]})})})}):a.find("img:has-src").each(function(){f.push({src:this.src,element:this})}),n=f.length,r=0,n===0&&(s.call(a[0]),i.resolveWith(a[0])),e.each(f,function(u,f){var l=new Image,c="load."+t+" error."+t;e(l).one(c,function h(t){var u=[r,n,t.type=="load"];r++,o.apply(f.element,u),i.notifyWith(f.element,u),e(this).off(c,h);if(r==n)return s.call(a[0]),i.resolveWith(a[0]),!1}),l.src=f.src})}),i.promise()}});